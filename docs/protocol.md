<div align="center">

# 聊天室协议

</div>

> 注意：
>
> - 协议内的长度(u64)编码采用**小端序**
> - 布局的区间大小单位为**字节**

## 短链接

### 请求

#### 请求头

**头是变长的**，因为方法使用字符串描述。

**结构**：

| 字段 | 类型 | 描述 |
|-:|:-:|:-|
| **method** | `String` | **方法**，服务端路由凭此将请求转发给正确的处理者 |
| **length** | `u16` | 体的大小，单位为**字节**。上限为**10485760**B，即**10MB** |

**布局**：

```
  8 + <字符串长度>       2
|     method       | length |
```

#### 请求体

体容纳通信的内容。

**体是变长的**，其长度由头的`length`字段指定。

体的字节流具体**反序列化**成何类型，由头的`method`字段指定。


### 响应

#### 响应头

响应头是**定长的**，本协议只提供**有限个**状态码。

**结构**：

| 字段 | 类型 | 描述 |
|-:|:-:|:-|
| **status** | `u8` | **状态码**，服务端对请求处理的结果 |
| **length** | `u64` | 体的大小，单位为**字节** |

**布局**：

```
    1        8
| status | length |
```

#### 响应体

当响应状态码为**OK**时，响应体会携带的大小为`length`字节的数据；其余情况，响应体不携带数据。

#### 状态码

| 号码 | 含义 |
|:-:|:-|
| 0 | OK |


### 接口

- 短链接测试
  - 请求方法：**ping**
  - 期待响应：`"pong"`
